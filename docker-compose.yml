services:
  
  scraper:
    build: 
      context: .
      dockerfile: ./scraper/Dockerfile

    container_name: scraper_app
    
    volumes:
      - ./scraper:/app/scraper/
    
    env_file:
      - ./.env
      - ./scraper/.env

  dbt:
    build: 
      context: .
      dockerfile: ./dbt_part/Dockerfile
    
    container_name: dbt_app
    
    volumes:
      - ./dbt_part:/app/dbt_part/
    
    env_file:
      - ./.env
      - ./dbt_part/.env
    
    depends_on:
      - scraper
  
  airflow:
    build:
      context: .
      dockerfile: ./airflow/Dockerfile

    container_name: airflow_app

    volumes:
      - ./airflow/:/app/airflow/

    depends_on:
      - scraper
      - dbt

    ports:
      - "8000:8000"

    environment:
      - AIRFLOW__CORE__LOAD_EXAMPLES=false